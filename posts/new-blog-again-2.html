<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="../css/style.css?Thu Oct 25 15:47:24 2018" />
	<link rel="alternate" type="application/rss+xml" title="pennie-quinn.github.io posts" href="../posts.xml" />
	<title>A New Blog Again... Again!</title>
	
	<script type="text/javascript">
		window.site_root = "..";
	</script>
	
	<script type="text/javascript">
  if (window.location.hostname != "localhost") {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-127983421-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  }
</script>
</head>

<body class="nice_fonts">
	
<div class="sidebar">
	<a href="../index.html" title="pennie.net">
		<img class="logo" src="../img/devnull.svg" alt="pennie.net" />
	</a>
	
	<p>Pennie's ramblings. Feel free to <a href="mailto:pennie.ada.quinn@gmail.com">email me</a>.</p>
	
	<div class="sidebar_icons">
		<a href="mailto:pennie.ada.quinn@gmail.com"><img src="../img/icon/mail.svg" alt="email" /></a>
		<a href="https://twitter.com/transmutrix"><img src="../img/icon/twitter.svg" alt="twitter" /></a>
		<a href="https://github.com/pennie-quinn"><img src="../img/icon/github.svg" alt="github" /></a>
	</div>
	
	<br>
	
	<p>Recent Posts</p>
	<p><a href='https://pennie-quinn.github.io/posts/new-blog-again-2.html'>A New Blog Again... Again!</a></p>
<p><a href='https://pennie-quinn.github.io/posts/intimacy-of-bugs.html'>The Unexpected Intimacy of Game Bugs</a></p>
<p><a href='https://pennie-quinn.github.io/posts/haxeflixel-lighting.html'>HaxeFlixel Lighting Adventure</a></p>

</div>
	
<div class="main-column">

<div class="post-header">
	<h1>A New Blog Again... Again!</h1>
	<div class="post-meta">
		Posted
		<span class: "post-date">Tue, 23 Oct, 2018</span>
		by Pennie (<a href="https://twitter.com/transmutrix">@transmutrix</a>)
	</div>
</div>

<div class="inner post-body"><p>Hahahaaaaaaa yeah, seriously. When I was first working on <a href="http://pq93.net">PQ93</a>, I was researching scripting languages. I like <a href="http://lua.org">Lua</a>, but I've used it <em>far</em> too often and I wanted to try something else. Then I discovered <a href="http://moonscript.org">MoonScript</a>.</p>

<p>As a friend later remarked: <em>MoonScript is bae.</em></p>

<p>Since making MoonScript the official language for PQ93 cartridges, I've really come to like it. It has the pros of Lua without the cons, and a simple, sexy syntax, too.</p>

<p>Then I discovered that <a href="http://leafo.net">Leafo</a> has also written a <a href="http://leafo.net/sitegen">site generator</a> in MoonScript. <em>mmf</em></p>

<p>So I went ahead and set that up and used it to rewrite my blog! Looking at old code of <code>leafo.net</code> for usage examples (scant docs!), I ended up trying <a href="http://sass-lang.com">SASS</a> as well, which is <em>also</em> bae.</p>

<p>Being a lethargic, depressive person (most of the time), I realized I probably wouldn’t update the blog, even with the rewrite, if I had to maintain the feed file and copy/paste metadata to new posts. So I began writing a <code>bash</code> script to create new posts. This is what I had done for previous iterations of the blog&mdash;use <code>sed</code> and a template file and blahblahblah.</p>

<p>Then I realized it would be simpler and better to just write <em>that</em> in MoonScript, too. It took a few minutes and works fine:</p>

<pre class="highlight lang_MoonScript"><code><span></span><span class="n">args</span><span class="o">=</span><span class="kt">{</span><span class="o">...</span><span class="kt">}</span>

<span class="k">if</span> <span class="o">#</span><span class="n">args</span> <span class="o">&lt;</span> <span class="mi">2</span>
    <span class="nb">print</span><span class="s1">&#39;</span><span class="s">usage:</span><span class="se">\n\t</span><span class="s">moon post.moon my-post &quot;My Dope Post&quot;</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">feed</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">feed_posts.moon</span><span class="s2">&quot;</span>

<span class="n">is_md</span> <span class="o">=</span> <span class="kt">(</span><span class="n">s</span><span class="kt">)</span> <span class="nf">-&gt;</span> <span class="o">#</span><span class="n">s</span><span class="o">&gt;</span><span class="mi">3</span> <span class="k">and</span> <span class="n">s</span><span class="o">\</span><span class="n">sub</span><span class="kt">(</span><span class="o">#</span><span class="n">s</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">#</span><span class="n">s</span><span class="kt">)</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">.md</span><span class="s1">&#39;</span>
<span class="n">no_md</span> <span class="o">=</span> <span class="kt">(</span><span class="n">s</span><span class="kt">)</span> <span class="nf">-&gt;</span> <span class="n">s</span><span class="o">\</span><span class="n">sub</span><span class="kt">(</span><span class="mi">1</span><span class="p">,</span><span class="o">#</span><span class="n">s</span><span class="o">-</span><span class="mi">3</span><span class="kt">)</span>

<span class="n">title</span> <span class="o">=</span> <span class="n">args</span><span class="kt">[</span><span class="mi">2</span><span class="kt">]</span>
<span class="n">infile</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">posts/</span><span class="s2">&quot;</span> <span class="o">..</span> <span class="n">args</span><span class="kt">[</span><span class="mi">1</span><span class="kt">]</span><span class="o">\</span><span class="n">lower</span><span class="o">!</span>
<span class="n">infile</span> <span class="o">..=</span> <span class="s1">&#39;</span><span class="s">.md</span><span class="s1">&#39;</span> <span class="n">unless</span> <span class="n">is_md</span> <span class="n">infile</span>

<span class="n">header</span> <span class="o">=</span> <span class="s">[[</span>
<span class="s">{</span>
<span class="s">    title: &quot;%s&quot;</span>
<span class="s">    date: &quot;%s&quot;</span>
<span class="s">    is_a: &quot;blog_post&quot;</span>
<span class="s">}</span>

<span class="s">]]</span><span class="o">\</span><span class="n">format</span> <span class="n">title</span><span class="p">,</span> <span class="nb">os.date</span> <span class="s2">&quot;</span><span class="s">%a, %b %d, %Y</span><span class="s2">&quot;</span>

<span class="n">entry</span> <span class="o">=</span> <span class="s">[[</span>
<span class="s">    {</span>
<span class="s">        date:  date %s</span>
<span class="s">        title: &quot;%s&quot;</span>
<span class="s">        link:  &quot;https://pennie-quinn.github.io/posts/%s.html&quot;</span>
<span class="s">        description: &quot;&quot;</span>
<span class="s">    }</span>
<span class="s">]]</span><span class="o">\</span><span class="n">format</span> <span class="nb">os.date</span><span class="kt">(</span><span class="s2">&quot;</span><span class="s">%Y, %m, %d</span><span class="s2">&quot;</span><span class="kt">)</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">no_md</span> <span class="n">infile</span>

<span class="c1">-- check if file already exists</span>
<span class="n">overwrite</span> <span class="o">=</span> <span class="kc">false</span>
<span class="k">with</span> <span class="n">file</span><span class="o">=</span><span class="nb">io.open</span> <span class="n">infile</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">r</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">file</span>
        <span class="o">\</span><span class="n">close</span><span class="o">!</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">#{infile} already exists! Do you want to overwrite it? (y/N)</span><span class="s2">&quot;</span>
        <span class="k">with</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">io.read</span><span class="o">!</span> <span class="k">do</span> <span class="k">return</span> <span class="n">unless</span> <span class="kt">(</span><span class="n">r</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span> <span class="k">or</span> <span class="n">r</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">Y</span><span class="s1">&#39;</span><span class="kt">)</span>
        <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">true</span>

<span class="c1">-- write the file</span>
<span class="k">with</span> <span class="n">file</span><span class="o">=</span><span class="nb">io.open</span> <span class="n">infile</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">w</span><span class="s2">&quot;</span>
    <span class="o">\</span><span class="n">write</span> <span class="n">header</span>
    <span class="o">\</span><span class="n">close</span><span class="o">!</span>

<span class="c1">-- add the post to feed_posts.moon</span>
<span class="k">if</span> <span class="k">not</span> <span class="n">overwrite</span>
    <span class="n">local</span> <span class="n">lines</span>
    <span class="k">with</span> <span class="nb">io.open</span> <span class="n">feed</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">r</span><span class="s2">&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="kt">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="k">in</span> <span class="o">\</span><span class="n">lines</span><span class="o">!</span><span class="kt">]</span>
        <span class="o">\</span><span class="n">close</span><span class="o">!</span>
    <span class="k">with</span> <span class="nb">io.open</span> <span class="n">feed</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">w+</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="o">#</span><span class="n">lines</span><span class="o">-</span><span class="mi">1</span> <span class="k">do</span> <span class="o">\</span><span class="n">write</span> <span class="n">lines</span><span class="kt">[</span><span class="n">i</span><span class="kt">]</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">\</span><span class="n">write</span> <span class="n">entry</span>
        <span class="o">\</span><span class="n">write</span> <span class="n">lines</span><span class="kt">[</span><span class="o">#</span><span class="n">lines</span><span class="kt">]</span>
        <span class="o">\</span><span class="n">close</span><span class="o">!</span>

<span class="c1">-- open the post in Focused</span>
<span class="nb">os.execute</span> <span class="s2">&quot;</span><span class="s">open -a Focused </span><span class="se">\&quot;</span><span class="s">$(pwd)/#{infile}</span><span class="se">\&quot;</span><span class="s2">&quot;</span></code>
</pre>


<p>So, now, I can just say:
<pre class="highlight lang_Bash"><code><span></span>$ moon post.moon foo “Bar”</code>
</pre></p>

<p>I <em>did</em> go ahead and wrap it in a <code>bash</code> script, so I can say <code>./post foo “Bar”</code>, but that’s just excessive laziness. ;)</p>

<p>New langs, new look, easier maintenance + posting. Nice!</p>
</div>

<div class="comments">
	<div id="disqus_thread"></div>
	<script>
	var disqus_config = function () {
		//this.page.url = PAGE_URL;
		this.page.identifier = "A New Blog Again... Again!" + "Tue, 23 Oct, 2018";
	};
	(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = 'https://pennie.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
	</script>
</div></div>
	
	<div class="footer">
		<p>
			Copyright &copy; Pennie Quinn 2018
			&middot;
			Generated on Thu Oct 25 15:47:24 2018
			&middot;
			<a href="../index.html">Home</a>
		</p>
	</div>
	
	<script type="text/javascript">
		//if (navigator.appVersion.indexOf("Win") >= 0) { document.body.className=""; }
	</script>
</body>
</html>